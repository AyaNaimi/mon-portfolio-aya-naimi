/* Advanced Scroll Animations CSS */
/* Optimisé pour les performances et la compatibilité cross-browser */

/* Variables CSS pour les animations */
:root {
  --animation-ease-out: cubic-bezier(0.4, 0, 0.2, 1);
  --animation-ease-in-out: cubic-bezier(0.5, 0, 0, 1);
  --animation-ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
  --animation-ease-smooth: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  
  /* Durées par défaut */
  --duration-text: 600ms;
  --duration-image: 800ms;
  --duration-interactive: 400ms;
  --duration-card: 500ms;
  --duration-button: 300ms;
  
  /* Délais */
  --stagger-delay: 100ms;
  --max-stagger-delay: 2000ms;
}

/* Base pour tous les éléments avec animations */
.fade-in-element {
  opacity: 0;
  transform: translateY(20px);
  visibility: hidden;
  will-change: opacity, transform;
  backface-visibility: hidden;
  perspective: 1000px;
  /* Optimisation GPU pour les animations fluides */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

.fade-in-element.is-visible,
.fade-in-element.animate-in {
  opacity: 1;
  transform: translateY(0);
  visibility: visible;
}

/* Types d'animation spécifiques */
.fade-in-element[data-animation-type="text"] {
  animation-duration: var(--duration-text);
  transition: opacity var(--duration-text) var(--animation-ease-out), 
              transform var(--duration-text) var(--animation-ease-out);
}

.fade-in-element[data-animation-type="image"] {
  animation-duration: var(--duration-image);
  transition: opacity var(--duration-image) var(--animation-ease-smooth), 
              transform var(--duration-image) var(--animation-ease-smooth);
}

.fade-in-element[data-animation-type="interactive"] {
  animation-duration: var(--duration-interactive);
  transition: opacity var(--duration-interactive) var(--animation-ease-bounce), 
              transform var(--duration-interactive) var(--animation-ease-bounce);
}

.fade-in-element[data-animation-type="card"] {
  animation-duration: var(--duration-card);
  transition: opacity var(--duration-card) var(--animation-ease-in-out), 
              transform var(--duration-card) var(--animation-ease-in-out);
}

.fade-in-element[data-animation-type="button"] {
  animation-duration: var(--duration-button);
  transition: opacity var(--duration-button) var(--animation-ease-out), 
              transform var(--duration-button) var(--animation-ease-out);
}

/* Effets de cascade */
.cascade-container {
  overflow: hidden;
}

.cascade-item {
  opacity: 0;
  transform: translateY(30px);
  animation: cascadeReveal 0.6s var(--animation-ease-out) forwards;
}

.cascade-item:nth-child(1) { animation-delay: calc(var(--stagger-delay) * 1); }
.cascade-item:nth-child(2) { animation-delay: calc(var(--stagger-delay) * 2); }
.cascade-item:nth-child(3) { animation-delay: calc(var(--stagger-delay) * 3); }
.cascade-item:nth-child(4) { animation-delay: calc(var(--stagger-delay) * 4); }
.cascade-item:nth-child(5) { animation-delay: calc(var(--stagger-delay) * 5); }
.cascade-item:nth-child(6) { animation-delay: calc(var(--stagger-delay) * 6); }
.cascade-item:nth-child(7) { animation-delay: calc(var(--stagger-delay) * 7); }
.cascade-item:nth-child(8) { animation-delay: calc(var(--stagger-delay) * 8); }
.cascade-item:nth-child(9) { animation-delay: calc(var(--stagger-delay) * 9); }
.cascade-item:nth-child(10) { animation-delay: calc(var(--stagger-delay) * 10); }

@keyframes cascadeReveal {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Animations différentes selon la direction */
.fade-in-element[data-direction="up"] {
  transform: translateY(30px);
}

.fade-in-element[data-direction="down"] {
  transform: translateY(-30px);
}

.fade-in-element[data-direction="left"] {
  transform: translateX(30px);
}

.fade-in-element[data-direction="right"] {
  transform: translateX(-30px);
}

.fade-in-element[data-direction="scale"] {
  transform: scale(0.9);
}

/* Animation avec effet de parallaxe léger */
.fade-in-element[data-parallax="light"] {
  transform: translateY(20px);
  transition: transform 0.8s var(--animation-ease-out);
}

.fade-in-element[data-parallax="medium"] {
  transform: translateY(40px);
  transition: transform 1s var(--animation-ease-out);
}

.fade-in-element[data-parallax="strong"] {
  transform: translateY(60px);
  transition: transform 1.2s var(--animation-ease-out);
}

/* Animations spéciales pour les images */
.fade-in-element[data-animation-type="image"][data-effect="zoom"] {
  transform: scale(1.1);
}

.fade-in-element[data-animation-type="image"][data-effect="zoom"].is-visible {
  transform: scale(1);
}

.fade-in-element[data-animation-type="image"][data-effect="blur"] {
  filter: blur(5px);
  transform: scale(1.05);
}

.fade-in-element[data-animation-type="image"][data-effect="blur"].is-visible {
  filter: blur(0);
  transform: scale(1);
}

/* Optimisations pour les éléments interactifs */
.fade-in-element[data-animation-type="interactive"]:hover {
  transform: translateY(-2px) scale(1.02);
  transition: transform 0.2s var(--animation-ease-out);
}

/* Support pour les préférences d'accessibilité */
@media (prefers-reduced-motion: reduce) {
  .fade-in-element,
  .cascade-item {
    animation: none !important;
    transition: none !important;
    transform: none !important;
    opacity: 1 !important;
    visibility: visible !important;
  }
}

/* Fallback pour les navigateurs sans Intersection Observer */
.no-js .fade-in-element {
  opacity: 1 !important;
  transform: none !important;
  visibility: visible !important;
}

/* Optimisations pour les performances */
.fade-in-element {
  /* Force l'accélération matérielle */
  transform: translate3d(0, 0, 0);
  -webkit-transform: translate3d(0, 0, 0);
  /* Évite les reflows */
  contain: layout style paint;
}

/* Support pour les navigateurs plus anciens */
@supports not (transform: translate3d(0, 0, 0)) {
  .fade-in-element {
    transform: translateY(20px);
    -webkit-transform: translateY(20px);
  }
}

/* Animations pour les éléments de type texte avec effet de machine à écrire */
.fade-in-element[data-effect="typewriter"] {
  overflow: hidden;
  white-space: nowrap;
  border-right: 2px solid currentColor;
  animation: typewriter 2s steps(40, end), blink-caret 0.75s step-end infinite;
}

@keyframes typewriter {
  from { width: 0; }
  to { width: 100%; }
}

@keyframes blink-caret {
  from, to { border-color: transparent; }
  50% { border-color: currentColor; }
}

/* Animations pour les cartes avec effet de flip */
.fade-in-element[data-effect="flip"] {
  perspective: 1000px;
}

.fade-in-element[data-effect="flip"] > * {
  transform-style: preserve-3d;
  transition: transform 0.8s;
}

.fade-in-element[data-effect="flip"].is-visible > * {
  transform: rotateY(0deg);
}

/* Support pour les écrans tactiles */
@media (hover: none) and (pointer: coarse) {
  .fade-in-element[data-animation-type="interactive"]:hover {
    transform: none;
  }
}

/* Optimisations pour les appareils à faible puissance */
@media (max-width: 768px) {
  .fade-in-element {
    /* Réduire la complexité sur mobile */
    transform: translateY(10px);
  }
  
  .cascade-item {
    animation-duration: 0.4s;
  }
  
  /* Désactiver certaines animations sur les appareils moins puissants */
  .fade-in-element[data-effect="blur"],
  .fade-in-element[data-effect="zoom"],
  .fade-in-element[data-parallax] {
    transform: translateY(10px);
    filter: none;
  }
}

/* Animations de sortie pour les éléments qui sortent de la vue */
.fade-in-element.is-exiting {
  opacity: 0;
  transform: translateY(-20px);
  transition: opacity 0.4s var(--animation-ease-out), 
              transform 0.4s var(--animation-ease-out);
}

/* Styles pour les groupes d'éléments */
.fade-in-group {
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.6s var(--animation-ease-out), 
              transform 0.6s var(--animation-ease-out);
}

.fade-in-group.is-visible {
  opacity: 1;
  transform: translateY(0);
}

.fade-in-group .fade-in-element {
  opacity: 1;
  transform: none;
}

/* Utilitaires pour la personnalisation */
.animate-delay-100 { animation-delay: 100ms; }
.animate-delay-200 { animation-delay: 200ms; }
.animate-delay-300 { animation-delay: 300ms; }
.animate-delay-400 { animation-delay: 400ms; }
.animate-delay-500 { animation-delay: 500ms; }

.animate-duration-fast { animation-duration: 300ms; }
.animate-duration-normal { animation-duration: 600ms; }
.animate-duration-slow { animation-duration: 900ms; }

/* Classes utilitaires pour les directions */
.animate-from-top { transform: translateY(-30px); }
.animate-from-bottom { transform: translateY(30px); }
.animate-from-left { transform: translateX(-30px); }
.animate-from-right { transform: translateX(30px); }

/* Debug pour développement */
@media (min-width: 1200px) {
  .fade-in-element[data-debug="true"] {
    outline: 1px dashed red;
  }
  
  .fade-in-element[data-debug="true"].is-visible {
    outline: 1px dashed green;
  }
}